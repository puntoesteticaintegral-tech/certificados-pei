<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Consulta de Certificados - PEI</title>
<style>
  body { font-family: Arial; margin: 30px; }
  #resultado { margin-top: 20px; }
  .btn {
    padding: 10px 20px;
    background: #007bff;
    color: white;
    border: none;
    border-radius: 6px;
    cursor: pointer;
  }
</style>
</head>
<body>

<h2>Consulta tu Certificado</h2>

<input type="text" id="dni" placeholder="Ingresa tu DNI">
<button class="btn" onclick="buscar()">Buscar</button>

<div id="resultado"></div>

<script>
  const API_URL = "https://script.google.com/macros/s/AKfycbwsIUhSRxW27qEi5U7IU7tFgwFuAlJDRFYkXt5U9PTSnKLUuwGYzLhwpcHJnKp1NQLMAA/exec";

  function buscar() {
    const dni = document.getElementById("dni").value;
    const salida = document.getElementById("resultado");
    salida.innerHTML = "Buscando...";

    fetch(`${API_URL}?dni=${dni}`)
      .then(res => res.json())
      .then(data => {
        if (data.found) {
          salida.innerHTML = `
            <h3>✅ Certificado encontrado</h3>
            <p><strong>Nombre:</strong> ${data.nombre}</p>
            <p><strong>Curso:</strong> ${data.curso}</p>
            <p><strong>Fecha:</strong> ${data.fecha ?? "No registrada"}</p>
            <a class="btn" href="${data.certificado}" target="_blank">Ver certificado aquí</a>
          `;
        } else {
          salida.innerHTML = "<h3>❌ No se encontró ningún certificado con ese DNI.</h3>";
        }
      })
      .catch(err => {
        salida.innerHTML = "Error en la consulta.";
        console.error(err);
      });
  }
</script>

</body>
</html>
